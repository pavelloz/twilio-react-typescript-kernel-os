(this["webpackJsonptwilio-video-app-react"]=this["webpackJsonptwilio-video-app-react"]||[]).push([[0],{170:function(e){e.exports=JSON.parse('{"a":"0.1.0"}')},177:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZIAAAEyCAYAAADQnlYUAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFdElEQVR42u3dwW3DUAxEQSnI2a2oCxXtLtyKGlB68BrZMH+mAoGH/8CLuF/HeW8AC3u8nrspvO/LCAAQEgAqruO8hQSAtyNiIwEgioiQABBFREgAiCIiJABEERESAKKICAkAUUSEBIAoIkICQBQRIQEgioiQABBFREgAiCIiJABEERESAKKICAkAW3rg8PuTH+PKGDDl8eNzc7SRAIiIkADQ2+iEBEBEhASATkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASAXkSEBEBEhASA7t+QhQRARIQEQESEBICBERESABEREgARERIAhkZESABEREgARERIABgaESEBEBEhARARIQFgaESEBEBEhARARIQEgKERERKARSPyeD13IQEQkXpEhARARIQEQER6ERESABEREgAR6UVESABEREgARKQXESEBEBEhARCRXkSEBEBEhARARHoRERIAERESABHpRURIAERESABEREgARGRoRIQEQESEBEBEhARARIZGREgARERIAERESABEZGhEhARARIQEQESEBEBEhkZESABEREgARERIAERkaESEBEBEhARARIQEQESEBEBEVoyIkACIiJAATPLfIiIkACIiJAAiIiQAIiIkAKwYESEBEBEhARARIQEQESEBYMWICAmAiAgJgIgICYCICAmAiAgJACIiJAAiIiQAIiIkACIiJACIiJAAiIiQAIiIkACIiJAAiAhCAiAiQgIgIkICICJCAiAiCAmAiAgJgIgICYCICAmAiAgJgIggJAAiIiQAIiIkACIiJAAigpAAiIiQAIiIkACIiJAAiAhCAogIQgIgIkICICJCAiAiCAkgIggJgIj8Fd9GAAgINhIAhAQAIQFASABASAAQEgCEBAAhAQAhAUBIABASAIQEAIQEACEBQEgAEBIAEBIAhAQAIQFASAAQEgAQEgCEBAAhAUBIAEBIABASAIQEACEBACEBQEgAEBIAhAQAhAQAIQFASAAQEgCEBACEBAAhAUBIABASABASAIQEACEBQEgAQEgAEBIAhAQAIQEAIQFASAAQEoDQdZz3dZy3SQgJQBwUUxASADEREgAxERIAMUFIADEREyEBEBMhARATIQEQE4QEQEyEBEBMhARATIQEQEwQEgAxERIAMRESADEREgAxQUgAxERIAMRESADEREgAxERIABATIQEQEyEBEBMhARATIQFATIQEQEyEBEBMhARATIQEADEREgAxERIAMRESADEREgDEREgAxERIAMRESADEREgAWDsmQgIgJkICICZCAiAmQgLAijEREgAxERIAMRESADEREgBWjImQAGzb9ng9dzEREgAxERIAMRESADFZKiZCAiAmQgIgJkICICZDYyIkAGIiJABiIiQAYjI0JkICICZCAiAmQgIgJkNjIiQAYiIkAGIiJABiMjQmQgIgJkICICZCAiAmQ2MiJABiIiQAYtKLiZAAiImQAIhJLyZCAiAmQgIgJr2YCAmAmAgJgJj0YiIkAGIiJABi0ouJkACIiZAAiEkvJkICICZCAiAmvZgICcCiMRESADEREgDmx0RIAMRESADEREgAGBoTIQEQEyEBEBMhAWBoTIQEQEyEBEBMhASAoTEREgAxERIAMRESAIbGREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFREgAxERIAOjFZL+O8zZOwKP6926h/5a0AzYSABGNIiokAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACIYiIkAEQxERIAopgICQBRTIQEgCgmQgJAFBMhASCKiZAAEMVESACI/ACDMI238rqCJQAAAABJRU5ErkJggg=="},196:function(e,t,n){e.exports=n(312)},312:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),c=n.n(i),o=n(372),l=n(369),u=n(378),d=n(14),s=n(158),m=n(377),f=n(3),E=n(163),v=n.n(E),b=n(353),p=n(379),h=n(5),g=Object(a.createContext)(null);function A(){var e=Object(a.useContext)(g),t=Object(h.a)(e,2);return[t[0],t[1]]}function O(e){var t=e.room,n=e.children,i=Object(a.useState)(null),c=Object(h.a)(i,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){var e=function(){return l(null)};return t.on("disconnected",e),function(){t.off("disconnected",e)}}),[t]),r.a.createElement(g.Provider,{value:[o,function(e){return l((function(t){return t===e?null:e}))}]},n)}var S=n(157),k=n.n(S),C="undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/Mobile/.test(navigator.userAgent);function w(){var e=B(),t=e.room.localParticipant,n=e.localTracks,r=e.getLocalVideoTrack,i=e.removeLocalVideoTrack,c=e.onError,o=n.find((function(e){return e.name.includes("camera")})),l=Object(a.useState)(!1),u=Object(h.a)(l,2),d=u[0],s=u[1],m=Object(a.useCallback)((function(){if(!d)if(o){var e=null===t||void 0===t?void 0:t.unpublishTrack(o);null===t||void 0===t||t.emit("trackUnpublished",e),i()}else s(!0),r().then((function(e){return null===t||void 0===t?void 0:t.publishTrack(e,{priority:"low"})})).catch(c).finally((function(){return s(!1)}))}),[o,t,r,d,c,i]);return[!!o,m]}function j(){var e=B().room,t=w(),n=Object(h.a)(t,2),r=n[0],i=n[1],c=Object(a.useRef)(!1);return Object(a.useEffect)((function(){if(C){var e=function(){"hidden"===document.visibilityState&&r?(c.current=!0,i()):c.current&&(c.current=!1,i())};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}}),[r,e,i]),null}var I=n(34),T=n(29),R=n.n(T);var y=n(16),x=n.n(y);window.TwilioVideo=R.a;var P=Object(a.createContext)(null);function _(e){var t=e.options,n=e.children,i=e.onError,c=void 0===i?function(){}:i,o=e.onDisconnect,l=void 0===o?function(){}:o,u=function(e){console.log("ERROR: ".concat(e.message),e),c(e)},d=function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),c=Object(h.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)(!1),d=Object(h.a)(u,2),s=d[0],m=d[1],f=Object(a.useCallback)((function(e){var t={};return e&&(t.deviceId={exact:e}),R.a.createLocalAudioTrack(t).then((function(e){return r(e),e}))}),[]),E=Object(a.useCallback)((function(e){var t=Object(I.a)({frameRate:24,height:720,width:1280,name:"camera-".concat(Date.now())},e);return R.a.createLocalVideoTrack(t).then((function(e){return l(e),e}))}),[]),v=Object(a.useCallback)((function(){o&&(o.stop(),l(void 0))}),[o]);return Object(a.useEffect)((function(){m(!0),R.a.createLocalTracks({video:{frameRate:24,height:720,width:1280,name:"camera-".concat(Date.now())},audio:!0}).then((function(e){var t=e.find((function(e){return"video"===e.kind})),n=e.find((function(e){return"audio"===e.kind}));t&&l(t),n&&r(n)})).finally((function(){return m(!1)}))}),[]),{localTracks:[n,o].filter((function(e){return void 0!==e})),getLocalVideoTrack:E,getLocalAudioTrack:f,isAcquiringLocalTracks:s,removeLocalVideoTrack:v}}(),s=d.localTracks,m=d.getLocalVideoTrack,f=d.getLocalAudioTrack,E=d.isAcquiringLocalTracks,v=d.removeLocalVideoTrack,b=function(e,t,n){var r=Object(a.useState)(new x.a),i=Object(h.a)(r,2),c=i[0],o=i[1],l=Object(a.useState)(!1),u=Object(h.a)(l,2),d=u[0],s=u[1],m=Object(a.useRef)([]);return Object(a.useEffect)((function(){m.current=e}),[e]),{room:c,isConnecting:d,connect:Object(a.useCallback)((function(e){return s(!0),R.a.connect(e,Object(I.a)({},n,{tracks:[]})).then((function(e){o(e);var t=function(){return e.disconnect()};e.once("disconnected",(function(){setTimeout((function(){return o(new x.a)})),window.removeEventListener("beforeunload",t),C&&window.removeEventListener("pagehide",t)})),window.twilioRoom=e,m.current.forEach((function(t){return e.localParticipant.publishTrack(t,{priority:"video"===t.kind?"low":"standard"})})),s(!1),window.addEventListener("beforeunload",t),C&&window.addEventListener("pagehide",t)}),(function(e){t(e),s(!1)}))}),[n,t])}}(s,u,t),p=b.room,g=b.isConnecting,A=b.connect;return function(e,t){Object(a.useEffect)((function(){var n=function(e,n){n&&t(n)};return e.on("disconnected",n),function(){e.off("disconnected",n)}}),[e,t])}(p,c),function(e,t){var n=e.localParticipant;Object(a.useEffect)((function(){if(n)return n.on("trackPublicationFailed",t),function(){n.off("trackPublicationFailed",t)}}),[n,t])}(p,c),function(e,t){Object(a.useEffect)((function(){return e.on("disconnected",t),function(){e.off("disconnected",t)}}),[e,t])}(p,l),r.a.createElement(P.Provider,{value:{room:p,localTracks:s,isConnecting:g,onError:u,onDisconnect:l,getLocalVideoTrack:m,getLocalAudioTrack:f,connect:A,isAcquiringLocalTracks:E,removeLocalVideoTrack:v}},r.a.createElement(O,{room:p},n),r.a.createElement(j,null))}function B(){var e=Object(a.useContext)(P);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}var D=Object(s.a)((function(e){return Object(m.a)({fab:{margin:e.spacing(1)}})}));function L(){var e=D(),t=B().room;return r.a.createElement(p.a,{title:"End Call",onClick:function(){return t.disconnect()},placement:"top",PopperProps:{disablePortal:!0}},r.a.createElement(b.a,{className:e.fab,color:"primary"},r.a.createElement(v.a,null)))}var N=n(164),Q=n.n(N),M=n(85),W=n.n(M);function U(e){var t=Object(a.useState)(!!e&&e.isEnabled),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(!!e&&e.isEnabled),e){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}var H=Object(s.a)((function(e){return Object(m.a)({fab:{margin:e.spacing(1)}})}));function K(e){var t=H(),n=function(){var e=B().localTracks.find((function(e){return"audio"===e.kind}));return[U(e),Object(a.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}(),i=Object(h.a)(n,2),c=i[0],o=i[1];return r.a.createElement(p.a,{title:c?"Mute Audio":"Unmute Audio",placement:"top",PopperProps:{disablePortal:!0}},r.a.createElement(b.a,{className:t.fab,onClick:o,disabled:e.disabled,"data-cy-audio-toggle":!0},c?r.a.createElement(Q.a,null):r.a.createElement(W.a,null)))}var V=n(165),F=n.n(V),J=n(62),z=n.n(J),G=Object(s.a)((function(e){return Object(m.a)({fab:{margin:e.spacing(1)}})}));function Z(e){var t=G(),n=w(),i=Object(h.a)(n,2),c=i[0],o=i[1],l=Object(a.useRef)(0),u=Object(a.useCallback)((function(){Date.now()-l.current>200&&(l.current=Date.now(),o())}),[o]);return r.a.createElement(p.a,{title:c?"Mute Video":"Unmute Video",placement:"top",PopperProps:{disablePortal:!0}},r.a.createElement(b.a,{className:t.fab,onClick:u,disabled:e.disabled},c?r.a.createElement(F.a,null):r.a.createElement(z.a,null)))}var Y=n(86),q=n.n(Y),X=n(166),$=n.n(X);function ee(){var e=B().room,t=Object(a.useState)(),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if("connected"===e.state){var t=function(){i(Array.from(e.participants.values()).concat(e.localParticipant).find((function(e){return Array.from(e.tracks.values()).find((function(e){return e.trackName.includes("screen")}))})))};return t(),e.on("trackPublished",t),e.on("trackUnpublished",t),e.on("participantDisconnected",t),e.localParticipant.on("trackPublished",t),e.localParticipant.on("trackUnpublished",t),function(){e.off("trackPublished",t),e.off("trackUnpublished",t),e.off("participantDisconnected",t),e.localParticipant.off("trackPublished",t),e.localParticipant.off("trackUnpublished",t)}}}),[e]),r}var te=Object(s.a)((function(e){return Object(m.a)({fab:{margin:e.spacing(1),"&[disabled]":{color:"rgba(225, 225, 225, 0.8)",backgroundColor:"rgba(175, 175, 175, 0.6);"}}})}));function ne(e){var t=te(),n=function(){var e=B(),t=e.room,n=e.onError,r=Object(a.useState)(!1),i=Object(h.a)(r,2),c=i[0],o=i[1],l=Object(a.useRef)(null),u=Object(a.useCallback)((function(){navigator.mediaDevices.getDisplayMedia({audio:!1,video:{frameRate:10,height:1080,width:1920}}).then((function(e){var a=e.getTracks()[0];t.localParticipant.publishTrack(a,{name:"screen",priority:"low"}).then((function(e){l.current=function(){t.localParticipant.unpublishTrack(a),t.localParticipant.emit("trackUnpublished",e),a.stop(),o(!1)},a.onended=l.current,o(!0)})).catch(n)})).catch((function(e){"AbortError"!==e.name&&"NotAllowedError"!==e.name&&n(e)}))}),[t,n]),d=Object(a.useCallback)((function(){c?l.current():u()}),[c,u,l]);return[c,d]}(),i=Object(h.a)(n,2),c=i[0],o=i[1],l=ee(),u=B().room,d=l&&l!==u.localParticipant,s=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,m=e.disabled||d||!s,f="Share Screen";return c&&(f="Stop Sharing Screen"),d&&(f="Cannot share screen when another user is sharing"),s||(f="Screen sharing is not supported with this browser"),r.a.createElement(p.a,{title:f,placement:"top",PopperProps:{disablePortal:!0},style:{cursor:m?"not-allowed":"pointer"}},r.a.createElement("div",null,r.a.createElement(b.a,{className:t.fab,onClick:o,disabled:m},c?r.a.createElement($.a,null):r.a.createElement(q.a,null))))}var ae=n(167),re=n.n(ae);function ie(){var e=B().room,t=Object(a.useState)("disconnected"),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(){return i(e.state||"disconnected")};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}),[e]),r}var ce=Object(s.a)((function(e){return Object(m.a)({container:Object(d.a)({display:"flex",position:"absolute",right:"50%",transform:"translate(50%, 30px)",bottom:"50px",zIndex:1,transition:"opacity 1.2s, transform 1.2s, visibility 0s 1.2s",opacity:0,visibility:"hidden",maxWidth:"min-content","&.showControls, &:hover":{transition:"opacity 0.6s, transform 0.6s, visibility 0s",opacity:1,visibility:"visible",transform:"translate(50%, 0px)"}},e.breakpoints.down("xs"),{bottom:"".concat(e.sidebarMobileHeight+3,"px")})})}));function oe(){var e=ce(),t=ie(),n="reconnecting"===t,i=function(){var e=Object(a.useState)(!0),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(a.useRef)(0);return Object(a.useEffect)((function(){var e=re()((function(){r(!0),clearTimeout(i.current);var e=window.setTimeout((function(){return r(!1)}),5e3);i.current=e}),500);return e(),window.addEventListener("mousemove",e),window.addEventListener("click",e),window.addEventListener("keydown",e),function(){window.removeEventListener("mousemove",e),window.removeEventListener("click",e),window.removeEventListener("keydown",e),clearTimeout(i.current)}}),[]),n}()||"disconnected"===t;return r.a.createElement("div",{className:Object(f.a)(e.container,{showControls:i})},r.a.createElement(K,{disabled:n}),r.a.createElement(Z,{disabled:n}),"disconnected"!==t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{disabled:n}),r.a.createElement(L,null)))}var le=Object(u.a)("video")({width:"100%",maxHeight:"100%",objectFit:"contain"});function ue(e){var t=e.track,n=e.isLocal,i=e.priority,c=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=c.current;return e.muted=!0,t.setPriority&&i&&t.setPriority(i),t.attach(e),function(){t.detach(e),t.setPriority&&i&&t.setPriority(null)}}),[t,i]);var o="environment"!==t.mediaStreamTrack.getSettings().facingMode,l=n&&o?{transform:"rotateY(180deg)"}:{};return r.a.createElement(le,{ref:c,style:l})}function de(){var e=B().localTracks.find((function(e){return e.name.includes("camera")}));return e?r.a.createElement(ue,{track:e,isLocal:!0}):null}var se=n(365),me=n(359),fe=n(367),Ee=n(383),ve=n(169),be=n.n(ve),pe=n(40),he=n.n(pe),ge=n(168),Ae=n.n(ge),Oe=n(354);function Se(){var e=function(){var e=Object(a.useState)(!!he.a.fullscreenElement),t=Object(h.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=function(){return r(!!he.a.fullscreenElement)};return he.a.addEventListener("fullscreenchange",e),function(){he.a.removeEventListener("fullscreenchange",e)}}),[]);var i=Object(a.useCallback)((function(){n?he.a.exitFullscreen():he.a.requestFullscreen(document.documentElement)}),[n]);return[n,i]}(),t=Object(h.a)(e,2),n=t[0],i=t[1];return he.a.fullscreenEnabled?r.a.createElement(Oe.a,{"aria-label":"full screen",onClick:i},n?r.a.createElement(Ae.a,null):r.a.createElement(be.a,null)):null}var ke=n(366),Ce=n(376),we=n(358),je=n(356),Ie=n(357),Te=n(355),Re=n(170);var ye=function(e){var t=e.open,n=e.onClose;return r.a.createElement(Ce.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"xs"},r.a.createElement(Te.a,null,"About:"),r.a.createElement(je.a,null,r.a.createElement(Ie.a,null,"Browser supported: ",String(R.a.isSupported)),r.a.createElement(Ie.a,null,"SDK Version: ",R.a.version),r.a.createElement(Ie.a,null,"App Version: ",Re.a),r.a.createElement(Ie.a,null,"Deployed Tag: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GIT_TAG||"N/A"),r.a.createElement(Ie.a,null,"Deployed Commit Hash: ",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GIT_COMMIT||"N/A")),r.a.createElement(we.a,null,r.a.createElement(me.a,{onClick:n,color:"primary",autoFocus:!0},"OK")))},xe=n(179),Pe=n(380),_e=n(173),Be=n.n(_e),De=n(373),Le=n(364),Ne=n(360),Qe=n(106),Me=n(361),We=n(381),Ue=n(375),He={trackSwitchOffMode:void 0,dominantSpeakerPriority:"standard",bandwidthProfileMode:"collaboration",maxTracks:C?"5":"10",maxAudioBitrate:"16000",renderDimensionLow:"low",renderDimensionStandard:"960p",renderDimensionHigh:"wide1080p"},Ke=function(){var e={};for(var t in He)e[t]=t;return e}();function Ve(e,t){return Object(I.a)({},e,Object(d.a)({},t.name,"default"===t.value?void 0:t.value))}var Fe=[{label:"Low (160 x 90)",value:"low",resolution:{width:160,height:90}},{label:"CIF (352 x 288)",value:"cif",resolution:{width:352,height:288}},{label:"VGA (640 x 480)",value:"vga",resolution:{width:640,height:480}},{label:"WVGA (800 x 480)",value:"wvga",resolution:{width:800,height:480}},{label:"HD 540P (960 x 540)",value:"540p",resolution:{width:960,height:540}},{label:"HD 720P (1280 x 720)",value:"720p",resolution:{width:1280,height:720}},{label:"HD 960P (1280 x 960)",value:"960p",resolution:{width:1280,height:960}},{label:"HD Standard 1080P (1440 x 1080)",value:"standard1080p",resolution:{width:1440,height:1080}},{label:"HD Widescreen 1080P (1920 x 1080)",value:"wide1080p",resolution:{width:1920,height:1080}},{label:"Server Default",value:"default",resolution:void 0}];function Je(e){var t;if("undefined"!==typeof e)return null===(t=Fe.find((function(t){return t.value===e})))||void 0===t?void 0:t.resolution}var ze=n(37),Ge=n.n(ze),Ze=n(51),Ye=n(68),qe=(n(309),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_DATABASE_URL,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID});var Xe=n(46);function $e(e,t,n){return fetch("/token.json",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_identity:e,room_name:t,passcode:n})})}function et(e){return $e("temp-name","temp-room",e).then(function(){var e=Object(Ze.a)(Ge.a.mark((function e(t){var n,a;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,401!==t.status){e.next=5;break}return e.abrupt("return",{isValid:!1,error:null===(a=n.error)||void 0===a?void 0:a.message});case 5:if(!t.ok||!n.token){e.next=7;break}return e.abrupt("return",{isValid:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function tt(e){switch(e){case"passcode incorrect":return"Passcode is incorrect";case"passcode expired":return"Passcode has expired";default:return e}}function nt(){var e=Object(Xe.g)(),t=Object(a.useState)(null),n=Object(h.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(!1),o=Object(h.a)(c,2),l=o[0],u=o[1],d=Object(a.useCallback)((function(e,t){return $e(e,t,r.passcode).then(function(){var e=Object(Ze.a)(Ge.a.mark((function e(t){var n,a,r;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.json();case 4:throw a=e.sent,r=tt((null===(n=a.error)||void 0===n?void 0:n.message)||t.statusText),Error(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.json()})).then((function(e){return e.token}))}),[r]);Object(a.useEffect)((function(){var t=function(){var e=window.location.search.match(/passcode=(.*)&?/);return e?e[1]:window.sessionStorage.getItem("passcode")}();t?et(t).then((function(n){(null===n||void 0===n?void 0:n.isValid)&&(i({passcode:t}),window.sessionStorage.setItem("passcode",t),e.replace(window.location.pathname))})).then((function(){return u(!0)})):u(!0)}),[e]);var s=Object(a.useCallback)((function(e){return et(e).then((function(t){if(!(null===t||void 0===t?void 0:t.isValid))throw new Error(tt(null===t||void 0===t?void 0:t.error));i({passcode:e}),window.sessionStorage.setItem("passcode",e)}))}),[]),m=Object(a.useCallback)((function(){return i(null),window.sessionStorage.removeItem("passcode"),Promise.resolve()}),[]);return{user:r,isAuthReady:l,getToken:d,signIn:s,signOut:m}}var at=Object(a.createContext)(null);function rt(e){var t=Object(a.useState)(null),n=Object(h.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(!1),l=Object(h.a)(o,2),u=l[0],d=l[1],s=Object(a.useState)("default"),m=Object(h.a)(s,2),f=m[0],E=m[1],v=Object(a.useReducer)(Ve,He),b=Object(h.a)(v,2),p=b[0],g=b[1],A={error:i,setError:c,isFetching:u,activeSinkId:f,setActiveSinkId:E,settings:p,dispatchSetting:g};A="firebase"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH?Object(I.a)({},A,{},function(){var e=Object(a.useState)(null),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(h.a)(i,2),o=c[0],l=c[1],u=Object(a.useCallback)(function(){var e=Object(Ze.a)(Ge.a.mark((function e(t,a){var r,i,c,o;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new window.Headers,e.next=3,n.getIdToken();case 3:return i=e.sent,r.set("Authorization",i),c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_TOKEN_ENDPOINT||"/token.json",o=new window.URLSearchParams({identity:t,roomName:a}),e.abrupt("return",fetch("".concat(c,"?").concat(o),{headers:r}).then((function(e){return e.text()})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]);Object(a.useEffect)((function(){Ye.initializeApp(qe),Ye.auth().onAuthStateChanged((function(e){r(e),l(!0)}))}),[]);var d=Object(a.useCallback)((function(){var e=new Ye.auth.GoogleAuthProvider;return e.addScope("https://www.googleapis.com/auth/plus.login"),Ye.auth().signInWithPopup(e).then((function(e){r(e.user)}))}),[]),s=Object(a.useCallback)((function(){return Ye.auth().signOut().then((function(){r(null)}))}),[]);return{user:n,signIn:d,signOut:s,isAuthReady:o,getToken:u}}()):"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH?Object(I.a)({},A,{},nt()):Object(I.a)({},A,{getToken:function(){var e=Object(Ze.a)(Ge.a.mark((function e(t,n){var a,r,i;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new window.Headers,r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_TOKEN_ENDPOINT||"/token.json",i=new window.URLSearchParams({identity:t,roomName:n}),e.abrupt("return",fetch("".concat(r,"?").concat(i),{headers:a}).then((function(e){return e.text()})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});return r.a.createElement(at.Provider,{value:Object(I.a)({},A,{getToken:function(e,t){return d(!0),A.getToken(e,t).then((function(e){return d(!1),e.trim()})).catch((function(e){return c(e),d(!1),Promise.reject(e)}))}})},e.children)}function it(){var e=Object(a.useContext)(at);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}var ct=Object(s.a)({formControl:{display:"block",margin:"1.5em 0","&:first-child":{margin:"0 0 1.5em 0"}},label:{width:"133%"}}),ot=function(e){return"undefined"===typeof e?"default":e},lt=Fe.map((function(e){var t=e.label,n=e.value;return r.a.createElement(Pe.a,{value:n,key:n},t)}));function ut(e){var t=e.className,n=e.hidden,i=ct(),c=it(),o=c.settings,l=c.dispatchSetting,u="disconnected"!==ie(),d=Object(a.useCallback)((function(e){l({name:e.target.name,value:e.target.value})}),[l]),s=Object(a.useCallback)((function(e){/[^\d]/.test(e.target.value)||d(e)}),[d]);return r.a.createElement(je.a,{className:t,hidden:n},r.a.createElement(Ne.a,{container:!0,spacing:2},r.a.createElement(Ne.a,{item:!0,xs:12},r.a.createElement(Qe.a,{variant:"body2"},"Bandwidth Profile Settings:"),r.a.createElement(Qe.a,{hidden:!u,variant:"body2"},"These settings cannot be changed when connected to a room.")),r.a.createElement(Ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Me.a,{className:i.formControl},r.a.createElement(We.a,{id:Ke.dominantSpeakerPriority},"Dominant Speaker Priority:"),r.a.createElement(Ue.a,{fullWidth:!0,disabled:u,name:Ke.dominantSpeakerPriority,label:Ke.dominantSpeakerPriority,value:ot(o.dominantSpeakerPriority),onChange:d},r.a.createElement(Pe.a,{value:"low"},"Low"),r.a.createElement(Pe.a,{value:"standard"},"Standard"),r.a.createElement(Pe.a,{value:"high"},"High"),r.a.createElement(Pe.a,{value:"default"},"Server Default"))),r.a.createElement(Me.a,{className:i.formControl},r.a.createElement(We.a,{id:Ke.trackSwitchOffMode},"Track Switch Off Mode:"),r.a.createElement(Ue.a,{fullWidth:!0,disabled:u,name:Ke.trackSwitchOffMode,label:Ke.trackSwitchOffMode,value:ot(o.trackSwitchOffMode),onChange:d},r.a.createElement(Pe.a,{value:"predicted"},"Predicted"),r.a.createElement(Pe.a,{value:"detected"},"Detected"),r.a.createElement(Pe.a,{value:"disabled"},"Disabled"),r.a.createElement(Pe.a,{value:"default"},"Server Default"))),r.a.createElement(Me.a,{className:i.formControl},r.a.createElement(We.a,{id:Ke.bandwidthProfileMode},"Mode:"),r.a.createElement(Ue.a,{fullWidth:!0,disabled:u,name:Ke.bandwidthProfileMode,label:Ke.bandwidthProfileMode,value:ot(o.bandwidthProfileMode),onChange:d},r.a.createElement(Pe.a,{value:"grid"},"Grid"),r.a.createElement(Pe.a,{value:"collaboration"},"Collaboration"),r.a.createElement(Pe.a,{value:"presentation"},"Presentation"),r.a.createElement(Pe.a,{value:"default"},"Server Default"))),r.a.createElement(Me.a,{className:i.formControl},r.a.createElement(Ee.a,{disabled:u,fullWidth:!0,id:Ke.maxTracks,label:"Max Tracks",placeholder:"Leave blank for no limit",name:Ke.maxTracks,value:ot(o.maxTracks),onChange:s})),r.a.createElement(Me.a,{className:i.formControl},r.a.createElement(Ee.a,{disabled:u,fullWidth:!0,id:Ke.maxAudioBitrate,label:"Max Audio Bitrate",placeholder:"Leave blank for no limit",name:Ke.maxAudioBitrate,value:ot(o.maxAudioBitrate),onChange:s}))),r.a.createElement(Ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Me.a,{fullWidth:!0,className:i.formControl},r.a.createElement(We.a,{id:Ke.renderDimensionLow,className:i.label},"Render Dimension (Low Priority):"),r.a.createElement(Ue.a,{fullWidth:!0,disabled:u,name:Ke.renderDimensionLow,label:Ke.renderDimensionLow,value:ot(o.renderDimensionLow),onChange:d},lt)),r.a.createElement(Me.a,{fullWidth:!0,className:i.formControl},r.a.createElement(We.a,{id:Ke.renderDimensionStandard,className:i.label},"Render Dimension (Standard Priority):"),r.a.createElement(Ue.a,{fullWidth:!0,disabled:u,name:Ke.renderDimensionStandard,label:Ke.renderDimensionStandard,value:ot(o.renderDimensionStandard),onChange:d},lt)),r.a.createElement(Me.a,{fullWidth:!0,className:i.formControl},r.a.createElement(We.a,{id:Ke.renderDimensionHigh,className:i.label},"Render Dimension (High Priority):"),r.a.createElement(Ue.a,{fullWidth:!0,disabled:u,name:Ke.renderDimensionHigh,label:Ke.renderDimensionHigh,value:ot(o.renderDimensionHigh),onChange:d},lt)))))}var dt,st=n(386),mt=0,ft=window.AudioContext||window.webkitAudioContext;function Et(e){var t=(dt=dt||new ft).createMediaStreamSource(e),n=dt.createAnalyser();return n.smoothingTimeConstant=.4,n.fftSize=512,t.connect(n),n}var vt=r.a.memo((function(e){var t=e.size,n=e.audioTrack,i=e.background,c=t||24,o=Object(a.useRef)(null),l=Object(a.useRef)(),u=U(n);Object(a.useEffect)((function(){var e=function(){var e;return null===(e=l.current)||void 0===e?void 0:e.getTracks().forEach((function(e){return e.stop()}))};return null===n||void 0===n||n.on("stopped",e),function(){null===n||void 0===n||n.off("stopped",e)}}),[n]),Object(a.useEffect)((function(){var e=o.current;if(n&&u&&e){l.current=new MediaStream([n.mediaStreamTrack.clone()]);var t=Et(l.current),a=function(){t=Et(l.current)};window.addEventListener("focus",a);var r=new Uint8Array(t.frequencyBinCount),i=Object(st.a)((function(){t.getByteFrequencyData(r);for(var n=0,a=r.length,i=0;i<a;i++)n+=r[i];var c=Math.min(21,Math.max(0,14*Math.log10(n/a/3)));null===e||void 0===e||e.setAttribute("y",String(21-c))}),50);return function(){e.setAttribute("y","21"),i.stop(),window.removeEventListener("focus",a)}}}),[n,u]);var d="audio-level-clip-".concat(mt++);return u?r.a.createElement("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",height:"".concat(c,"px"),width:"".concat(c,"px")},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:d},r.a.createElement("rect",{ref:o,x:"0",y:"21",width:"24",height:"24"}))),r.a.createElement("path",{fill:i||"rgba(255, 255, 255, 0.1)",d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),r.a.createElement("path",{fill:"#0c0",clipPath:"url(#".concat(d,")"),d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})):r.a.createElement(W.a,{height:"".concat(c,"px"),width:"".concat(c,"px"),style:{width:"initial",height:"initial"},"data-cy-audio-mute-icon":!0})}));function bt(){var e=B().localTracks.find((function(e){return"audio"===e.kind}));return r.a.createElement(vt,{size:30,audioTrack:e})}function pt(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){return navigator.mediaDevices.enumerateDevices().then((function(e){return e.every((function(e){return!(e.deviceId&&e.label)}))})).then((function(e){if(e)return navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){return e.getTracks().forEach((function(e){return e.stop()}))}))})).then((function(){return navigator.mediaDevices.enumerateDevices().then((function(e){return r(e)}))}))};return navigator.mediaDevices.addEventListener("devicechange",e),e(),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[]),n}var ht=Object(s.a)({container:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"}});function gt(){var e=ht(),t=pt().filter((function(e){return"audioinput"===e.kind})),n=B(),a=n.room.localParticipant,i=n.localTracks,c=n.getLocalAudioTrack,o=i.find((function(e){return"audio"===e.kind})),l=null===o||void 0===o?void 0:o.mediaStreamTrack.getSettings().deviceId;return r.a.createElement("div",{className:e.container},r.a.createElement("div",{className:"inputSelect"},t.length>1?r.a.createElement(Me.a,{fullWidth:!0},r.a.createElement(Qe.a,{variant:"h6"},"Audio Input:"),r.a.createElement(Ue.a,{onChange:function(e){return t=e.target.value,null===o||void 0===o||o.stop(),void c(t).then((function(e){if(o){var t=null===a||void 0===a?void 0:a.unpublishTrack(o);null===a||void 0===a||a.emit("trackUnpublished",t)}null===a||void 0===a||a.publishTrack(e)}));var t},value:l||""},t.map((function(e){return r.a.createElement(Pe.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{variant:"h6"},"Audio Input:"),r.a.createElement(Qe.a,null,(null===o||void 0===o?void 0:o.mediaStreamTrack.label)||"No Local Audio"))),r.a.createElement(bt,null))}function At(){var e,t=pt().filter((function(e){return"audiooutput"===e.kind})),n=it(),a=n.activeSinkId,i=n.setActiveSinkId,c=null===(e=t.find((function(e){return e.deviceId===a})))||void 0===e?void 0:e.label;return r.a.createElement("div",{className:"inputSelect"},t.length>1?r.a.createElement(Me.a,{fullWidth:!0},r.a.createElement(Qe.a,{variant:"h6"},"Audio Output:"),r.a.createElement(Ue.a,{onChange:function(e){return i(e.target.value)},value:a},t.map((function(e){return r.a.createElement(Pe.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{variant:"h6"},"Audio Output:"),r.a.createElement(Qe.a,null,c||"System Default Audio Output")))}var Ot=Object(s.a)({preview:{width:"150px",margin:"0.5em 0"}});function St(){var e=Ot(),t=pt().filter((function(e){return"videoinput"===e.kind})),n=B(),a=n.room.localParticipant,i=n.localTracks,c=n.getLocalVideoTrack,o=i.find((function(e){return"video"===e.kind})),l=null===o||void 0===o?void 0:o.mediaStreamTrack.getSettings().deviceId;return r.a.createElement("div",null,t.length>1?r.a.createElement(Me.a,null,r.a.createElement(Qe.a,{variant:"h6"},"Video Input:"),r.a.createElement(Ue.a,{onChange:function(e){return t=e.target.value,null===o||void 0===o||o.stop(),void c({deviceId:{exact:t}}).then((function(e){if(o){var t=null===a||void 0===a?void 0:a.unpublishTrack(o);null===a||void 0===a||a.emit("trackUnpublished",t)}null===a||void 0===a||a.publishTrack(e)}));var t},value:l||""},t.map((function(e){return r.a.createElement(Pe.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{variant:"h6"},"Video Input:"),r.a.createElement(Qe.a,null,(null===o||void 0===o?void 0:o.mediaStreamTrack.label)||"No Local Video")),o&&r.a.createElement("div",{className:e.preview},r.a.createElement(ue,{isLocal:!0,track:o})))}var kt=Object(s.a)({listSection:{margin:"2em 0","&:first-child":{margin:"1em 0 2em 0"}}});function Ct(e){var t=e.className,n=e.hidden,a=kt();return r.a.createElement(je.a,{className:t,hidden:n},r.a.createElement("div",{className:a.listSection},r.a.createElement(gt,null)),r.a.createElement("div",{className:a.listSection},r.a.createElement(At,null)),r.a.createElement("div",{className:a.listSection},r.a.createElement(St,null)))}var wt=Object(s.a)((function(e){var t;return Object(m.a)({container:(t={width:"525px",minHeight:"400px"},Object(d.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(d.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(d.a)({},e.breakpoints.down("xs"),{margin:"16px"})})}));function jt(e){var t=e.open,n=e.onClose,i=wt(),c=Object(a.useState)(0),o=Object(h.a)(c,2),l=o[0],u=o[1];return r.a.createElement(Ce.a,{open:t,onClose:n,classes:{paper:i.paper}},r.a.createElement(De.a,{value:l,onChange:function(e,t){u(t)}},r.a.createElement(Le.a,{label:"Devices"}),r.a.createElement(Le.a,{label:"Settings"})),r.a.createElement(Ct,{className:i.container,hidden:0!==l}),r.a.createElement(ut,{className:i.container,hidden:1!==l}),r.a.createElement(we.a,null,r.a.createElement(me.a,{className:i.button,onClick:n},"Done")))}var It=n(384),Tt=n(313),Rt=n(172),yt=n.n(Rt),xt=Object(Tt.a)({red:{color:"white",backgroundColor:"#F22F46"}});function Pt(e){var t=e.user,n=xt(),a=t,i=a.displayName,c=a.photoURL;return c?r.a.createElement(It.a,{src:c}):r.a.createElement(It.a,{className:n.red},i?i.split(" ").map((function(e){return e[0]})).join("").toUpperCase():r.a.createElement(yt.a,null))}function _t(){var e=it(),t=e.user,n=e.signOut,i=B(),c=i.room,o=i.localTracks,l=Object(a.useState)(!1),u=Object(h.a)(l,2),d=u[0],s=u[1],m=Object(a.useState)(!1),f=Object(h.a)(m,2),E=f[0],v=f[1],b=Object(a.useState)(!1),p=Object(h.a)(b,2),g=p[0],A=p[1],O=Object(a.useRef)(null),S=Object(a.useCallback)((function(){var e;null===(e=c.disconnect)||void 0===e||e.call(c),o.forEach((function(e){return e.stop()})),null===n||void 0===n||n()}),[c.disconnect,o,n]);return r.a.createElement("div",{ref:O},r.a.createElement(Oe.a,{color:"inherit",onClick:function(){return v((function(e){return!e}))}},t?r.a.createElement(Pt,{user:t}):r.a.createElement(Be.a,null)),r.a.createElement(xe.a,{open:E,onClose:function(){return v((function(e){return!e}))},anchorEl:O.current},(null===t||void 0===t?void 0:t.displayName)&&r.a.createElement(Pe.a,{disabled:!0},t.displayName),r.a.createElement(Pe.a,{onClick:function(){return s(!0)}},"About"),r.a.createElement(Pe.a,{onClick:function(){return A(!0)}},"Settings"),t&&r.a.createElement(Pe.a,{onClick:S},"Logout")),r.a.createElement(ye,{open:d,onClose:function(){s(!1),v(!1)}}),r.a.createElement(jt,{open:g,onClose:function(){A(!1),v(!1)}}))}var Bt=n(174),Dt=n.n(Bt);function Lt(){var e=B(),t=e.room.localParticipant,n=e.localTracks,i=e.getLocalVideoTrack,c=Object(a.useState)(null),o=Object(h.a)(c,2),l=o[0],u=o[1],d=n.find((function(e){return e.name.includes("camera")})),s=null===d||void 0===d?void 0:d.mediaStreamTrack.getSettings().facingMode;Object(a.useEffect)((function(){s&&null===l&&u(Boolean(s))}),[s,l]);var m=Object(a.useCallback)((function(){var e="user"===s?"environment":"user";d.stop(),i({facingMode:e}).then((function(e){var n=null===t||void 0===t?void 0:t.unpublishTrack(d);null===t||void 0===t||t.emit("trackUnpublished",n),null===t||void 0===t||t.publishTrack(e,{priority:"low"})}))}),[s,i,t,d]);return l?r.a.createElement(Oe.a,{onClick:m,disabled:!d},r.a.createElement(Dt.a,null)):null}var Nt=Object(s.a)((function(e){return Object(m.a)({container:{backgroundColor:e.palette.background.default},toolbar:Object(d.a)({},e.breakpoints.down("xs"),{padding:0}),rightButtonContainer:{display:"flex",alignItems:"center",marginLeft:"auto"},form:Object(d.a)({display:"flex",flexWrap:"wrap",alignItems:"center"},e.breakpoints.up("md"),{marginLeft:"2.2em"}),textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),maxWidth:200},loadingSpinner:{marginLeft:"1em"},displayName:{margin:"1.1em 0.6em",minWidth:"200px",fontWeight:600},joinButton:{margin:"1em"}})}));function Qt(){var e=Nt(),t=Object(Xe.i)().URLRoomName,n=it(),i=n.user,c=n.getToken,o=n.isFetching,l=B(),u=l.isConnecting,d=l.connect,s=l.isAcquiringLocalTracks,m=ie(),f=Object(a.useState)((null===i||void 0===i?void 0:i.displayName)||""),E=Object(h.a)(f,2),v=E[0],b=E[1],p=Object(a.useState)(""),g=Object(h.a)(p,2),A=g[0],O=g[1];Object(a.useEffect)((function(){t&&O(t)}),[t]);return r.a.createElement(se.a,{className:e.container,position:"static"},r.a.createElement(ke.a,{className:e.toolbar},"disconnected"===m?r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),window.location.origin.includes("twil.io")||window.history.replaceState(null,"",window.encodeURI("/room/".concat(A).concat(window.location.search||""))),c(v,A).then((function(e){return d(e.trim())}))}},window.location.search.includes("customIdentity=true")||!(null===i||void 0===i?void 0:i.displayName)?r.a.createElement(Ee.a,{id:"menu-name",label:"Name",className:e.textField,value:v,onChange:function(e){b(e.target.value)},margin:"dense"}):r.a.createElement(Qe.a,{className:e.displayName,variant:"body1"},i.displayName),r.a.createElement(Ee.a,{id:"menu-room",label:"Room",className:e.textField,value:A,onChange:function(e){O(e.target.value)},margin:"dense"}),r.a.createElement(me.a,{className:e.joinButton,type:"submit",color:"primary",variant:"contained",disabled:s||u||!v||!A||o},"Join Room"),(u||o)&&r.a.createElement(fe.a,{className:e.loadingSpinner})):r.a.createElement("h3",null,A),r.a.createElement("div",{className:e.rightButtonContainer},r.a.createElement(Lt,null),r.a.createElement(bt,null),r.a.createElement(Se,null),r.a.createElement(_t,null))))}var Mt=n(175),Wt=n.n(Mt),Ut=n(385),Ht=n(368),Kt=Object(s.a)({snackbar:{backgroundColor:"#6db1ff"},message:{display:"flex",alignItems:"center"},icon:{marginRight:"0.8em"}});function Vt(){var e=Kt(),t=ie();return r.a.createElement(Ut.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:"reconnecting"===t},r.a.createElement(Ht.a,{className:e.snackbar,message:r.a.createElement("span",{className:e.message},r.a.createElement(Wt.a,{className:e.icon}),"Reconnecting\u2026")}))}var Ft=n(88),Jt=n.n(Ft),zt=Object(u.a)("div")({position:"absolute",zIndex:1,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),Gt=Object(u.a)("h3")({textAlign:"center",margin:"0.6em 0"});function Zt(){return r.a.createElement(zt,null,r.a.createElement("div",null,r.a.createElement(Jt.a,{fontSize:"large"})),r.a.createElement(Gt,null,"Insufficient Bandwidth"))}var Yt=Object(u.a)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",border:"1px solid black",boxSizing:"content-box","&:not(:last-child)":{borderRight:"none"}}});function qt(e){var t=e.qualityLevel;return null===t?null:r.a.createElement(Yt,null,[0,1,2,3,4].map((function(e){return r.a.createElement("div",{key:e,style:{height:"".concat(3*(e+1),"px"),background:t>e?"#0c0":"#040"}})})))}var Xt=Object(s.a)({indicator:{width:"10px",height:"10px",borderRadius:"100%",background:"#0c0",display:"inline-block",marginRight:"3px"},isReconnecting:{background:"#ffb100"}});function $t(e){var t=function(e){var t=Object(a.useState)(!1),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}(e.participant),n=Xt();return r.a.createElement(p.a,{title:t?"Participant is reconnecting":"Participant is connected"},r.a.createElement("span",{className:Object(f.a)(n.indicator,Object(d.a)({},n.isReconnecting,t))}))}var en=n(176),tn=n(84);function nn(){return r.a.createElement(p.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},r.a.createElement(tn.a,{style:{float:"right",fontSize:"29px"}},r.a.createElement(en.a,null)))}var an=n(73);function rn(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){i(Array.from(e.tracks.values()));var t=function(e){return i((function(t){return[].concat(Object(an.a)(t),[e])}))},n=function(e){return i((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function cn(e){var t=Object(a.useState)(e&&e.isSwitchedOff),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(e&&e.isSwitchedOff),e){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}function on(e){var t=Object(a.useState)(e&&e.track),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(e&&e.track),e){var t=function(){return i(null)};return e.on("subscribed",i),e.on("unsubscribed",t),function(){e.off("subscribed",i),e.off("unsubscribed",t)}}}),[e]),r}var ln=Object(s.a)((function(e){return Object(m.a)({container:Object(d.a)({position:"relative",display:"flex",alignItems:"center",height:"".concat(9*e.sidebarWidth/16,"px"),overflow:"hidden",cursor:"pointer","& video":{filter:"none"},"& svg":{stroke:"black",strokeWidth:"0.8px"}},e.breakpoints.down("xs"),{height:e.sidebarMobileHeight,width:"".concat(16*e.sidebarMobileHeight/9,"px"),marginRight:"3px",fontSize:"10px"}),isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(0.5)"}},infoContainer:{position:"absolute",zIndex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:"0.4em",width:"100%",background:"transparent"},hideVideo:{background:"black"},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRow:{display:"flex",justifyContent:"space-between"}})}));function un(e){var t=e.participant,n=e.onClick,i=e.isSelected,c=e.children,o=rn(t),l=o.find((function(e){return"audio"===e.kind})),u=o.find((function(e){return e.trackName.includes("camera")})),s=function(e){var t=Object(a.useState)(e.networkQualityLevel),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(e){return i(e)};return i(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(t),m=Boolean(u),E=o.find((function(e){return e.trackName.includes("screen")})),v=cn(on(u)),b=on(l),p=ln();return r.a.createElement("div",{className:Object(f.a)(p.container,Object(d.a)({},p.isVideoSwitchedOff,v)),onClick:n,"data-cy-participant":t.identity},r.a.createElement("div",{className:Object(f.a)(p.infoContainer,Object(d.a)({},p.hideVideo,!m))},r.a.createElement("div",{className:p.infoRow},r.a.createElement("h4",{className:p.identity},r.a.createElement($t,{participant:t}),t.identity),r.a.createElement(qt,{qualityLevel:s})),r.a.createElement("div",null,r.a.createElement(vt,{audioTrack:b,background:"white"}),!m&&r.a.createElement(z.a,null),E&&r.a.createElement(q.a,null),i&&r.a.createElement(nn,null))),v&&r.a.createElement(Zt,null),c)}function dn(e){var t=e.track,n=it().activeSinkId,r=Object(a.useRef)();return Object(a.useEffect)((function(){return r.current=t.attach(),r.current.setAttribute("data-cy-audio-track-name",t.name),document.body.appendChild(r.current),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t]),Object(a.useEffect)((function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.setSinkId)||void 0===t||t.call(e,n)}),[n]),null}function sn(e){var t=e.publication,n=e.isLocal,a=e.disableAudio,i=e.videoPriority,c=on(t);if(!c)return null;switch(c.kind){case"video":return r.a.createElement(ue,{track:c,priority:i,isLocal:c.name.includes("camera")&&n});case"audio":return a?null:r.a.createElement(dn,{track:c});default:return null}}function mn(e){var t,n=e.participant,a=e.disableAudio,i=e.enableScreenShare,c=e.videoPriority,o=B().room,l=rn(n),u=n===o.localParticipant;return t=i&&l.some((function(e){return e.trackName.includes("screen")}))?l.filter((function(e){return!e.trackName.includes("camera")})):l.filter((function(e){return!e.trackName.includes("screen")})),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(sn,{key:e.kind,publication:e,participant:n,isLocal:u,disableAudio:a,videoPriority:c})})))}function fn(e){var t=e.participant,n=e.disableAudio,a=e.enableScreenShare,i=e.onClick,c=e.isSelected;return r.a.createElement(un,{participant:t,onClick:i,isSelected:c},r.a.createElement(mn,{participant:t,disableAudio:n,enableScreenShare:a}))}function En(){var e=B().room,t=Object(a.useState)(e.dominantSpeaker),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(e){null!==e&&i(e)},n=function(e){i((function(t){return t===e?null:t}))};return e.on("dominantSpeakerChanged",t),e.on("participantDisconnected",n),function(){e.off("dominantSpeakerChanged",t),e.off("participantDisconnected",n)}}),[e]),r}function vn(){var e=B().room,t=En(),n=Object(a.useState)(Array.from(e.participants.values())),r=Object(h.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){t&&c((function(e){return[t].concat(Object(an.a)(e.filter((function(e){return e!==t}))))}))}),[t]),Object(a.useEffect)((function(){var t=function(e){return c((function(t){return[].concat(Object(an.a)(t),[e])}))},n=function(e){return c((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("participantConnected",t),e.on("participantDisconnected",n),function(){e.off("participantConnected",t),e.off("participantDisconnected",n)}}),[e]),i}var bn=Object(u.a)("aside")((function(e){var t=e.theme;return Object(d.a)({padding:"0.5em",overflowY:"auto"},t.breakpoints.down("xs"),{overflowY:"initial",overflowX:"auto",padding:0,display:"flex"})})),pn=Object(u.a)("div")((function(e){var t=e.theme;return Object(d.a)({},t.breakpoints.down("xs"),{display:"flex"})}));function hn(){var e=B().room.localParticipant,t=vn(),n=A(),a=Object(h.a)(n,2),i=a[0],c=a[1];return r.a.createElement(bn,null,r.a.createElement(pn,null,r.a.createElement(fn,{participant:e,isSelected:i===e,onClick:function(){return c(e)}}),t.map((function(e){return r.a.createElement(fn,{key:e.sid,participant:e,isSelected:i===e,onClick:function(){return c(e)}})}))))}var gn=Object(s.a)({container:{position:"relative",display:"flex",alignItems:"center",gridArea:"participantList"},isVideoSwitchedOff:{"& video":{filter:"blur(4px) grayscale(1) brightness(0.5)"}},identity:{background:"rgba(0, 0, 0, 0.7)",padding:"0.1em 0.3em",margin:"1em",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:1,height:"100%",padding:"0.4em",width:"100%"}});function An(e){var t=e.participant,n=e.children,a=gn(),i=rn(t),c=i.find((function(e){return e.trackName.includes("camera")})),o=i.find((function(e){return e.trackName.includes("screen")})),l=Boolean(c),u=cn(on(o||c));return r.a.createElement("div",{"data-cy-main-participant":!0,className:Object(f.a)(a.container,Object(d.a)({},a.isVideoSwitchedOff,u))},r.a.createElement("div",{className:a.infoContainer},r.a.createElement("h4",{className:a.identity},t.identity,!l&&r.a.createElement(z.a,null))),u&&r.a.createElement(Zt,null),n)}function On(){var e=function(){var e=A(),t=Object(h.a)(e,1)[0],n=ee(),a=En(),r=vn(),i=B().room.localParticipant;return t||n||a||r[0]||i}(),t=A(),n=Object(h.a)(t,1)[0],a=ee(),i=e===n||e===a?"high":null;return r.a.createElement(An,{participant:e},r.a.createElement(mn,{participant:e,disableAudio:!0,enableScreenShare:!0,videoPriority:i}))}var Sn=Object(u.a)("div")((function(e){var t=e.theme;return Object(d.a)({position:"relative",height:"100%",display:"grid",gridTemplateColumns:"".concat(t.sidebarWidth,"px 1fr"),gridTemplateAreas:'". participantList"',gridTemplateRows:"100%"},t.breakpoints.down("xs"),{gridTemplateAreas:'"participantList" "."',gridTemplateColumns:"auto",gridTemplateRows:"calc(100% - ".concat(t.sidebarMobileHeight+12,"px) ").concat(t.sidebarMobileHeight+6,"px"),gridGap:"6px"})}));function kn(){return r.a.createElement(Sn,null,r.a.createElement(hn,null),r.a.createElement(On,null))}var Cn=Object(u.a)("div")({display:"grid",gridTemplateRows:"auto 1fr"}),wn=Object(u.a)("main")({overflow:"hidden"});function jn(){var e=ie(),t=function(){var e,t=Object(a.useState)(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1)),n=Object(h.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var e=function(){var e;i(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),r+"px"}();return r.a.createElement(Cn,{style:{height:t}},r.a.createElement(Qt,null),r.a.createElement(wn,null,"disconnected"===e?r.a.createElement(de,null):r.a.createElement(kn,null),r.a.createElement(oe,null)),r.a.createElement(Vt,null))}var In=n(59);var Tn=function(e){var t=e.dismissError,n=e.error,a=n||{},i=a.message,c=a.code,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t){case 20101:return e+". Please make sure you are using the correct credentials.";default:return e}}(i,c);return r.a.createElement(Ce.a,{open:null!==n,onClose:function(){return t()},fullWidth:!0,maxWidth:"xs"},r.a.createElement(Te.a,null,"ERROR"),r.a.createElement(je.a,null,r.a.createElement(Ie.a,null,o),c&&r.a.createElement("pre",null,r.a.createElement("code",null,"Error Code: ",c))),r.a.createElement(we.a,null,r.a.createElement(me.a,{onClick:function(){return t()},color:"primary",autoFocus:!0},"OK")))};function Rn(e){var t,n={bandwidthProfile:{video:{mode:e.bandwidthProfileMode,dominantSpeakerPriority:e.dominantSpeakerPriority,renderDimensions:{low:Je(e.renderDimensionLow),standard:Je(e.renderDimensionStandard),high:Je(e.renderDimensionHigh)},maxTracks:Number(e.maxTracks)}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(e.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:!0}]};return C&&(null===n||void 0===n||null===(t=n.bandwidthProfile)||void 0===t?void 0:t.video)&&(n.bandwidthProfile.video.maxSubscriptionBitrate=25e5),function e(t){if(!k()(t))return t;var n={};for(var a in t){var r=t[a];"undefined"!==typeof r&&(n[a]=e(r))}return n}(n)}var yn=n(182);function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Pn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _n=r.a.createElement("title",null,"btn_google_light_normal_ios"),Bn=r.a.createElement("desc",null,"Created with Sketch."),Dn=r.a.createElement("defs",null,r.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.a.createElement("feOffset",{dx:0,dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.a.createElement("feOffset",{dx:0,dy:0,in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.a.createElement("feMergeNode",{in:"SourceGraphic"}))),r.a.createElement("rect",{id:"path-2",x:0,y:0,width:40,height:40,rx:2})),Ln=r.a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.a.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.a.createElement("g",{id:"handles_square"}))),Nn=function(e){var t=e.svgRef,n=e.title,a=Pn(e,["svgRef","title"]);return r.a.createElement("svg",xn({width:"32px",height:"32px",viewBox:"7 7 32 32",ref:t},a),void 0===n?_n:n?r.a.createElement("title",null,n):null,Bn,Dn,Ln)},Qn=r.a.forwardRef((function(e,t){return r.a.createElement(Nn,xn({svgRef:t},e))}));n.p;function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Wn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Un=r.a.createElement("path",{d:"M14.4 11.3c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm-3.1 4.3c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zM30 15c0 8.3-6.7 15-15 15S0 23.3 0 15 6.7 0 15 0s15 6.7 15 15zm-4 0c0-6.1-4.9-11-11-11S4 8.9 4 15s4.9 11 11 11 11-4.9 11-11zm-7.3.6c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm0-7.4c-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1-1.4-3.1-3.1-3.1zm51.6-2.3c.1 0 .2.1.3.2v3.2c0 .2-.2.3-.3.3H65c-.2 0-.3-.2-.3-.3V6.2c0-.2.2-.3.3-.3h5.3zm-.1 4.5H60c-.1 0-.3.1-.3.3l-1.3 5-.1.3-1.6-5.3c0-.1-.2-.3-.3-.3h-4c-.1 0-.3.1-.3.3l-1.5 5-.1.3-.1-.3-.6-2.5-.6-2.5c0-.1-.2-.3-.3-.3h-8V6.1c0-.1-.2-.3-.4-.2l-5 1.6c-.2 0-.3.1-.3.3v2.7h-1.3c-.1 0-.3.1-.3.3v3.8c0 .1.1.3.3.3h1.3v4.7c0 3.3 1.8 4.8 5.1 4.8 1.4 0 2.7-.3 3.6-.8v-4c0-.2-.2-.3-.3-.2-.5.2-1 .3-1.4.3-.9 0-1.4-.4-1.4-1.4v-3.4h2.9c.1 0 .3-.1.3-.3v-3.2L47.8 24c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l1.8-5.6.9 2.9.8 2.7c0 .1.2.3.3.3h4.2c.1 0 .3-.1.3-.3l3.8-12.6V24c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.2-.3zm6.7-4.5h-5.1c-.1 0-.3.1-.3.3v17.7c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm6.8 0h-5.3c-.1 0-.3.1-.3.3v3.1c0 .1.1.3.3.3h5.3c.1 0 .3-.1.3-.3V6.1c0-.1-.1-.2-.3-.2zm-.1 4.5h-5.1c-.1 0-.3.1-.3.3v13.1c0 .1.1.3.3.3h5.1c.1 0 .3-.1.3-.3V10.7c0-.1-.1-.3-.3-.3zm16.1 6.8c0 3.8-3.2 7.1-7.7 7.1-4.4 0-7.6-3.3-7.6-7.1s3.2-7.1 7.7-7.1c4.4 0 7.6 3.3 7.6 7.1zm-5.4.1c0-1.4-1-2.5-2.2-2.4-1.3 0-2.2 1.1-2.2 2.4s1 2.4 2.2 2.4c1.3 0 2.2-1.1 2.2-2.4z"}),Hn=function(e){var t=e.svgRef,n=e.title,a=Wn(e,["svgRef","title"]);return r.a.createElement("svg",Mn({fill:"#F22F46",viewBox:"0 0 100 30",ref:t},a),n?r.a.createElement("title",null,n):null,Un)},Kn=r.a.forwardRef((function(e,t){return r.a.createElement(Hn,Mn({svgRef:t},e))})),Vn=(n.p,n(177)),Fn=n.n(Vn),Jn=n(178),zn=Object(s.a)({container:{height:"100vh",background:"#0D122B"},twilioLogo:{width:"55%",display:"block"},videoLogo:{width:"25%",padding:"2.4em 0 2.1em"},paper:{display:"flex",alignItems:"center",flexDirection:"column",maxWidth:"460px",padding:"2em",marginTop:"4em",background:"white",color:"black"},button:{color:"black",background:"white",margin:"0.8em 0 0.7em",textTransform:"none"},errorMessage:{color:"red",display:"flex",alignItems:"center",margin:"1em 0 0.2em","& svg":{marginRight:"0.4em"}}}),Gn=Object(Jn.a)({palette:{type:"light"}});function Zn(){var e=zn(),t=it(),n=t.signIn,i=t.user,c=t.isAuthReady,o=Object(Xe.g)(),u=Object(Xe.h)(),d=Object(a.useState)(""),s=Object(h.a)(d,2),m=s[0],f=s[1],E=Object(a.useState)(null),v=Object(h.a)(E,2),b=v[0],p=v[1],g=Boolean(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH),A=function(){p(null),null===n||void 0===n||n(m).then((function(){var e;o.replace((null===u||void 0===u||null===(e=u.state)||void 0===e?void 0:e.from)||{pathname:"/"})})).catch((function(e){return p(e)}))};return!i&&g||o.replace("/"),c?r.a.createElement(l.a,{theme:Gn},r.a.createElement(Ne.a,{container:!0,justify:"center",alignItems:"flex-start",className:e.container},r.a.createElement(yn.a,{className:e.paper,elevation:6},r.a.createElement(Kn,{className:e.twilioLogo}),r.a.createElement("img",{className:e.videoLogo,src:Fn.a,alt:"Video Logo"}),"firebase"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH&&r.a.createElement(me.a,{variant:"contained",className:e.button,onClick:A,startIcon:r.a.createElement(Qn,null)},"Sign in with Google"),"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH&&r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),A()}},r.a.createElement(Ne.a,{container:!0,alignItems:"center",direction:"column"},r.a.createElement(Ee.a,{id:"input-passcode",label:"Passcode",onChange:function(e){return f(e.target.value)},type:"password"}),r.a.createElement("div",null,b&&r.a.createElement(Qe.a,{variant:"caption",className:e.errorMessage},r.a.createElement(Jt.a,null),b.message)),r.a.createElement(me.a,{variant:"contained",className:e.button,type:"submit",disabled:!m.length},"Submit")))))):null}var Yn=n(180);function qn(e){var t=e.children,n=Object(Yn.a)(e,["children"]),a=it(),i=a.isAuthReady,c=a.user||!Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH;return c||i?r.a.createElement(Xe.b,Object.assign({},n,{render:function(e){var n=e.location;return c?t:r.a.createElement(Xe.a,{to:{pathname:"/login",state:{from:n}}})}})):null}var Xn=Object(Jn.a)({palette:{type:"dark",primary:{main:"#F22F46"}},sidebarWidth:260,sidebarMobileHeight:90}),$n=n(370),ea=n(371),ta=Object(s.a)({container:{marginTop:"2.5em"},paper:{padding:"1em"},heading:{marginBottom:"0.4em"}}),na=function(e){var t=e.children,n=ta();return R.a.isSupported?t:r.a.createElement($n.a,null,r.a.createElement(Ne.a,{container:!0,justify:"center",className:n.container},r.a.createElement(Ne.a,{item:!0,xs:12,sm:6},r.a.createElement(yn.a,{className:n.paper},r.a.createElement(Qe.a,{variant:"h4",className:n.heading},"Browser or context not supported"),r.a.createElement(Qe.a,null,"Please open this application in one of the"," ",r.a.createElement(ea.a,{href:"https://www.twilio.com/docs/video/javascript#supported-browsers",target:"_blank",rel:"noopener"},"supported browsers"),".",r.a.createElement("br",null),"If you are using a supported browser, please ensure that this app is served over a"," ",r.a.createElement(ea.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener"},"secure context")," ","(e.g. https or localhost).")))))},aa=function(){var e=it(),t=e.error,n=e.setError,a=Rn(e.settings);return r.a.createElement(na,null,r.a.createElement(_,{options:a,onError:n},r.a.createElement(Tn,{dismissError:function(){return n(null)},error:t}),r.a.createElement(jn,null)))};c.a.render(r.a.createElement(l.a,{theme:Xn},r.a.createElement(o.a,null),r.a.createElement(In.a,null,r.a.createElement(rt,null,r.a.createElement(Xe.d,null,r.a.createElement(qn,{exact:!0,path:"/"},r.a.createElement(aa,null)),r.a.createElement(qn,{path:"/room/:URLRoomName"},r.a.createElement(aa,null)),r.a.createElement(Xe.b,{path:"/login"},r.a.createElement(Zn,null)),r.a.createElement(Xe.a,{to:"/"}))))),document.getElementById("root"))}},[[196,1,2]]]);
//# sourceMappingURL=main.1be6ef2d.chunk.js.map